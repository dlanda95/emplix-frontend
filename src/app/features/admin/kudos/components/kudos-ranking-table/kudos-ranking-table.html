<div class="table-container">
  
  <table *ngIf="!isLoading; else loadingTpl">
    <thead>
      <tr>
        <th class="text-center" style="width: 60px;">#</th> <th>Colaborador</th>
        <th class="text-center">Total</th>
        <th>Puntaje</th>
        <th class="hide-mobile">ADN Cultural</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let emp of data; let i = index">
        
        <td class="col-rank text-center">
          <span class="rank-number" [class.top-3]="i < 3">{{ i + 1 }}</span>
        </td>

        <td class="col-employee">
          <div class="employee-wrapper">
            <div class="avatar-circle">
              {{ emp.name.charAt(0) }}
            </div>
            <div class="info">
              <span class="name">{{ emp.name }}</span>
              <span class="role">{{ emp.position?.name || emp.position || 'Sin cargo' }}</span>
            </div>
          </div>
        </td>

        <td class="text-center font-bold">
          {{ emp.totalKudos }}
        </td>

        <td class="col-score">
          <div class="score-wrapper">
            <div class="progress-track">
              <div class="progress-fill" [style.width.%]="(emp.totalScore / 50) * 100"></div>
            </div>
            <span class="score-value">{{ emp.totalScore | number:'1.0-1' }} pts</span>
          </div>
        </td>

        <td class="col-tags hide-mobile">
          <div class="tags-list">
            <span *ngFor="let cat of getBreakdownKeys(emp.breakdown)" 
                  class="tag-pill"
                  [style.background-color]="categoryColors[cat] + '20'" 
                  [style.color]="categoryColors[cat]">
              <strong>{{ emp.breakdown[cat] }}</strong> {{ cat.substring(0,1) }}
            </span>
          </div>
        </td>

      </tr>
    </tbody>
  </table>

  <ng-template #loadingTpl>
    <div class="loading-skeleton">
      <p>Cargando datos de reconocimiento...</p>
    </div>
  </ng-template>

</div>